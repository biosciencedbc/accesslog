NBDCファンディング事業の成果DB等アクセス情報取得に関するガイドライン

２０１４.９.２６
Ver. 2.0
 JSTバイオサイエンスデータベースセンター（NBDC）

　はじめに

　NBDCの研究開発プログラム（基盤技術開発プログラム、統合化推進プログラム）の成果として、DBのアクセス数は利用状況を把握するための重要な指標の１つですが、現時点では、そのアクセス情報の集計方法を各研究グループに一任しており、事業において統一な集計ガイドラインがありません。そのため、集計手法、アクセス情報の項目、集計頻度等はさまざまで、実際の利用状況の把握や、成果としてのアピールもしにくい状態にあります。
　この状況を打開すべく、NBDCが成果DBのアクセス情報の集計方法の本ガイドラインを作成・提供し、各課題で運用していただくことで、成果を適切にアピールできるようにし、本事業が専門家以外の方にも評価されることを目指します。なお、各課題の負担をできるだけかけないように、ガイドラインの見直しも含めて配慮して参ります。ご協力のほど宜しくお願い致します。

１.  基本方針

アクセス集計の基本方針は以下の通りです。

(１) アクセスログ集計ツールをAWStats に統一します。
* バージョンについては、「４. AWStatsの設定上の留意点」の「(５)AWStatsのバージョンについて」を参照ください。
(２) 各研究グループは3ヶ月ごと（7月、10月、翌年1月、4月の15日を予定）に集計結果をNBDCへ提出します。提出に関しては都度にJST担当よりメールでのご案内をします。
(３) サイト全体だけでなく、可能な限り機能単位でのアクセス数を取得します。
(４) 提供されたアクセス情報は編集の上、年度末の実施報告書とともに、NBDCポータルサイトより一般公開します。平成25年度(2013/4/1～)分より実施しています。平成26年度以降は3ヵ月ごとに公開情報を更新します。
* 参考URL：http://biosciencedbc.jp/about-us/usage-of-database
(５) アクセスログ集計対象サイト一覧.xlsx（参照：３. 本ガイドラインの添付書類）に含まれる全てのサイトをアクセス数提出ならびに一般公開の対象としますが、研究グループからの申し入れがあれば一覧掲載後１年未満のサイトについては１年間NBDCへのアクセス数提出対象から除外できることとします。
(６) 研究グループにおいて、ファンディング期間終了後も継続して対象サイトのアクセス数をNBDCに提出し、アクセス情報の一般公開へのご協力をお願いします。

２.  Ver.1.1からの主な変更点

(１) 基本方針（３）の機能単位でのアクセス数取得について、運用ならびに利用方針が未定のため、Ver.2.0はURLとそれが指し示す機能の対応表(URL機能説明表.xls)の提出は不要とします。
(２) 提出フォーマットをAWstatsが出力するファイル（旧提出フォーマット１（参照：図 6  AWStats集計結果ファイルの先頭部分））に統一します。Excelファイルにアクセス数を転記したもの（旧提出フォーマット２）は受け付けません。詳細は「６. 集計結果の提出方法について」をご覧ください。
(３) 提出日は第一金曜日から、該当月の15日に変更しました。
(４) １. 基本方針の(５)ならびに(６)を追加しました。


３.  本ガイドラインの添付書類

フォルダ（題：NBDCファンディング事業の成果DBのアクセス情報に関するガイドライン）に以下のファイルが含まれています。
なお、https://github.com/biosciencedbc/accesslog/からもダウンロードできます。

(１) NBDCファンディング事業の成果DB等のアクセス情報に関するガイドライン.docx（本紙）
(２) アクセスログ集計対象サイト一覧.xlsx
アクセスログ取得対象となってNBDCファンディング事業の成果DB等サイト(URL)の一覧（Ver.1.1からVer.2.0に更新されています）

４.  AWStatsの設定上の留意点

集計の際には以下の点に留意して、AWStats_model.confの設定ならびにAWStatsの集計処理を実行してください。

(１) 集計対象サイト
　添付「アクセスログ集計対象サイト一覧.xlsx」を参照ください。
(２) 集計頻度
　月単位（デフォルト）
(３) 集計から除外するIPアドレス(SkipHosts設定)について
　原則、開発者ならびに運営者のIPアドレスを除いてください。
(４) ロボット/クローラIPアドレス（robots.pmファイル）について
* 原則、AWStatsのデフォルト設定をそのまま利用します（※）。
※H24年度進捗報告会の本件に関する配布資料では、“必要に応じて追加してもよい”と記載しましたが、見直した結果、デフォルト設定を利用し、ロボット/クローラ訪問数を報告する方針に変更します。
* エントリの追加は行いません。
* 誤検知によって通常のアクセスがロボット/クローラと判定される場合が顕著な場合は、エントリの削除（コメントアウト）を行ってもよいこととします。
* エントリを削除した場合は、本事業内で集計条件を統一するため、削除したエントリをNBDCまでお知らせください。
* 一部コメントアウトしたrobots.pmファイルは、github上で共有します。コメントアウト箇所はdiffを取って確認できます。
　　　　https://github.com/biosciencedbc/accesslog/robots.pm
* robots.pmファイルはVer. 7.1.1(2013年3月時点での最新版)に含まれるものを使います。Ver.1.1と変更ありません。2015年度はその時点での最新版のrobots.pmに差し替えていただく予定にしています。
(５) AWStatsのバージョンについて
* （４）で指定したVer. 7.1.1(2013年3月時点での最新版)に含まれるrobots.pmファイルを適用できるバージョンであれば構いません。
(６) Webサーバでログ取得する際には、NCSA combinedフォーマットで取得してください。Apacheでの設定例は以下のページなどを参照ください。
* http://httpd.apache.org/docs/current/mod/mod_log_config.html


５.  集計対象と集計方法について

　NBDCが収集対象としているアクセス集計項目は以下の通りです。
(１) 訪問者数（図 1　訪問者、訪問数、ページ数(サイト全体）)
(２) 訪問数（図 1　訪問者、訪問数、ページ数(サイト全体）)
(３) ページ数（サイト全体）（図 1　訪問者、訪問数、ページ数(サイト全体））
(４) ダウンロード数（サイト全体）（図 2　Download数（サイト全体））
(５) ロボット/スパイダーの訪問数（図 3 ロボット/スパイダーの訪問数）








件数、バイト数は集計対象外です。

図 2　Download数（サイト全体）

件数の合計がダウンロード数(サイト全体)です。


図 3 ロボット/スパイダーの訪問数

件数の合計がロボット/スパイダーの訪問数です。

６.  集計結果の提出方法について

６-１.  提出フォーマット
(１) 集計プログラムAWStats.plが出力する集計結果ファイル（参照：図 6）です。
(２) １サイト１ヵ月単位で１ファイル存在します。
(３) ファイル名のフォーマットは、awstats[mmyyyy].[サイトURL].txt1を想定しています。例えば、NBDC広報サイト(http://events.biosciencedbc.jp.txt)の2013年1月の集計ファイル名は、awstats012013.events.biosciencedbc.jp.txtとなります。
(４) 設定ファイル: awstats.[サイトURL].confの変数DirDataで指定したディレクトリにファイルが作成されます。
















６-２.  提出方法

NBDCが用意するファイルアップロードサイト(PrimeDrive)にアップロードします。提出期限が近づきましたら、NBDCより連絡いたします。Ver.1.1からの変更はありません。


７.  更新履歴

　2014/9/19 Ver.2.0
１. 「２. Ver.1.1からの主な変更点」に関する部分を更新
２. 「４. AWStatsの設定上の留意点(６)」の(６)を追加しました。

* 2013/3/27 Ver.1.1
1. 「４. AWStatsの設定上の留意点」「(４)ロボット/クローラIPアドレス（robots.pmファイル）について」
* robots.pmファイルのカスタマイズについて追記
2. 「４. AWStatsの設定上の留意点 」「(５)AWStatsのバージョンについて」
* Ver.7.0以下を利用する場合の注意点について追記

* 2013/3/6 Ver.1.0 初版
以上
1 2013年度ver.1.1ではAWStats[mmyyyy].[サイトURL].txtとAWSが大文字でしたが、AWStatsのデフォルトに合わせて小文字に変更いたします。ただし、大文字のファイルも受け付けます。
---------------

------------------------------------------------------------

---------------

------------------------------------------------------------

1


